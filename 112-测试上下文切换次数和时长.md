下面我们来看看有什么工具可以度量上下文切换带来的消耗。

* 使用Lmbench3 [1] 可以测量上下文切换的时长。
* 使用vmstat可以测量上下文切换的次数。

下面是利用vmstat测量上下文切换次数的示例。
```
$ vmstat 1
procs -----------memory---------- ---swap-- -----io---- --system-- -----cpu-----
r b   swpd   free   buff   cache    si so      bi bo      in    cs us sy id wa st
0 0      0 127876 398928 2297092     0 0        0 4        2    2    0 0 99 0 0
0 0      0 127868 398928 2297092     0 0        0 0      595 1171    0 1 99 0 0
0 0      0 127868 398928 2297092     0 0        0 0      590 1180    1 0 100 0 0
0 0      0 127868 398928 2297092     0 0        0 0      567 1135    0 1 99 0 0
```
CS（Content Switch）表示上下文切换的次数，从上面的测试结果中我们可以看到，上下文每1秒切换1000多次。
[^[1]] Lmbench3是一个性能分析工具。